<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>爲GitHub Pages配置Cloudflare的免費SSL數字證書 - MetaDefine - A super concise theme for Hugo</title>
  <link rel="alternate" hreflang="en" href="/" />

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="mitui" /><meta name="description" content="如何在GitHub pages中爲自有域名配置Cloudflare提供的免費SSL數字證書" />
<meta name="keywords" content="AxdLog, Cloudflare, SSL, Free SSL, GitHub pages, Hugo, Custom domain" />







<meta name="generator" content="Hugo 0.46" />


<link rel="canonical" href="/2018/using-cloudflare-free-ssl-in-github-pages-with-custom-domain/" />



<link rel="icon" href="/favicon.ico" />










<link href="/dist/jane.min.css?v=2.7.0" rel="stylesheet">




<meta property="og:title" content="爲GitHub Pages配置Cloudflare的免費SSL數字證書" />
<meta property="og:description" content="如何在GitHub pages中爲自有域名配置Cloudflare提供的免費SSL數字證書" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2018/using-cloudflare-free-ssl-in-github-pages-with-custom-domain/" />



<meta property="article:published_time" content="2018-04-11T15:16:42-04:00"/>

<meta property="article:modified_time" content="2018-04-11T16:05:42-04:00"/>











<meta itemprop="name" content="爲GitHub Pages配置Cloudflare的免費SSL數字證書">
<meta itemprop="description" content="如何在GitHub pages中爲自有域名配置Cloudflare提供的免費SSL數字證書">


<meta itemprop="datePublished" content="2018-04-11T15:16:42-04:00" />
<meta itemprop="dateModified" content="2018-04-11T15:16:42-04:00" />
<meta itemprop="wordCount" content="1364">



<meta itemprop="keywords" content="Cloudflare,SSL,Hugo," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="爲GitHub Pages配置Cloudflare的免費SSL數字證書"/>
<meta name="twitter:description" content="如何在GitHub pages中爲自有域名配置Cloudflare提供的免費SSL數字證書"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">MetaDefine</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        <a href="/">
          Home
        </a>
      </li><li class="mobile-menu-item">
        <a href="/tags/">
          Tags
        </a>
      </li><li class="mobile-menu-item">
        <a href="/post/">
          Archives
        </a>
      </li><li class="mobile-menu-item">
        <a href="/categories/">
          Categories
        </a>
      </li><li class="mobile-menu-item">
        <a href="/about/">
          About
        </a>
      </li>
  </ul>
</nav>

  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  
  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      MetaDefine
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/">Home</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/tags/">Tags</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">Archives</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">Categories</a>
          

        

      </li>
    
      <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/about/">About</a>
          

        

      </li>
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">爲GitHub Pages配置Cloudflare的免費SSL數字證書</h1>
      
      <div class="post-meta">
        <span class="post-time"> 2018-04-11 </span>
        <div class="post-category">
            
              <a href="/categories/blog/"> Blog </a>
            
          </div>
        <span class="more-meta"> 1364 words </span>
        <span class="more-meta"> 3 min read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Table of Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#配置-cloudflare">配置 Cloudflare</a>
<ul>
<li><a href="#添加站點">添加站點</a></li>
<li><a href="#選擇cloudflare套餐">選擇CloudFlare套餐</a></li>
<li><a href="#添加dns記錄">添加DNS記錄</a></li>
<li><a href="#更換-nameservers">更換 Nameservers</a></li>
<li><a href="#更新-nameservers">更新 Nameservers</a></li>
<li><a href="#crypto-配置">Crypto 配置</a></li>
</ul></li>
<li><a href="#配置-hugo">配置 Hugo</a></li>
<li><a href="#測試">測試</a></li>
<li><a href="#參考資料">參考資料</a></li>
<li><a href="#更新日誌">更新日誌</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <p>Blog已成功從<a href="https://hexo.io" title="A fast, simple &amp; powerful blog framework">Hexo</a>遷移到<a href="https://gohugo.io" title="The world’s fastest framework for building websites">Hugo</a>，新域名<a href="https://axdlog.com"><strong>AxdLog</strong></a>。由於<a href="https://pages.github.com" title="Hosted directly from your GitHub repository. Just edit, push, and your changes are live.">Github Pages</a>對自有域名不提供SSL證書，故須額外部署。<a href="https://www.cloudflare.com">CloudFlare</a>提供免費的SSL證書，並且提供防DDOS攻擊功能。</p>

<p>本文記錄如何配置並使用<a href="https://www.cloudflare.com">CloudFlare</a>的SSL證書。</p>

<p></p>

<h2 id="配置-cloudflare">配置 Cloudflare</h2>

<p>須先註冊<a href="https://www.cloudflare.com">CloudFlare</a>帳號，若已經有，直接登入。</p>

<h3 id="添加站點">添加站點</h3>

<p>若是新註冊用戶，登入後，出現 <strong>Add your site</strong> 頁面，輸入需要配置的域名。此處輸入<code>axdlog.com</code>。</p>

<p><img src="https://raw.githubusercontent.com/MaxdSre/maxdsre.github.io/image/blog-image/2018-04-11_cloudflare_free_ssl/2018-04-11_14-17-14_add_site.png" alt="" /></p>

<p>點擊<code>Add site</code>按鈕後，出現 <strong>We&rsquo;re querying your DNS records</strong> 頁面</p>

<p><img src="https://raw.githubusercontent.com/MaxdSre/maxdsre.github.io/image/blog-image/2018-04-11_cloudflare_free_ssl/2018-04-11_14-18-08_query_dns_records.png" alt="" /></p>

<p>點擊<code>Next</code>按鈕，出現 <strong>Select a Plan</strong> 頁面。</p>

<h3 id="選擇cloudflare套餐">選擇CloudFlare套餐</h3>

<p>套餐價格如下</p>

<table>
<thead>
<tr>
<th align="left">type</th>
<th align="left">price</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">Free Website</td>
<td align="left">$0/mon</td>
</tr>

<tr>
<td align="left">Pro Website</td>
<td align="left">$20/mon</td>
</tr>

<tr>
<td align="left">Business Website</td>
<td align="left">$200/mon</td>
</tr>

<tr>
<td align="left">Enterprise</td>
<td align="left">Get in touch</td>
</tr>
</tbody>
</table>

<p><img src="https://raw.githubusercontent.com/MaxdSre/maxdsre.github.io/image/blog-image/2018-04-11_cloudflare_free_ssl/2018-04-11_14-18-26_select_plan.png" alt="" /></p>

<p>建議有經濟能力的選擇<code>Pro</code>或<code>Business</code>套餐，一是功能更多，二也算支持<a href="https://www.cloudflare.com">Cloudflare</a>發展。此處，選擇<code>Free Website</code>，點擊按鈕<code>Confirm Plan</code>，出現 <strong>DNS query results</strong> 頁面</p>

<p><img src="https://raw.githubusercontent.com/MaxdSre/maxdsre.github.io/image/blog-image/2018-04-11_cloudflare_free_ssl/2018-04-11_14-18-52_dns_query_result.png" alt="" /></p>

<h3 id="添加dns記錄">添加DNS記錄</h3>

<p>顯示該域名當前的DNS記錄，刪除所有已有的記錄，新建2個<code>CNAME</code>記錄。</p>

<p>以下是本人的DNS Records</p>

<table>
<thead>
<tr>
<th align="left">Type</th>
<th align="left">Name</th>
<th align="left">Value</th>
<th align="left">TTL</th>
<th align="left">Status</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><strong>CNAME</strong></td>
<td align="left"><code>axdlog.com</code></td>
<td align="left"><code>maxdsre.github.io</code></td>
<td align="left">Automatic</td>
<td align="left">On CloudFlare</td>
</tr>

<tr>
<td align="left"><strong>CNAME</strong></td>
<td align="left"><code>www</code></td>
<td align="left"><code>maxdsre.github.io</code></td>
<td align="left">Automatic</td>
<td align="left">On CloudFlare</td>
</tr>
</tbody>
</table>

<p><img src="https://raw.githubusercontent.com/MaxdSre/maxdsre.github.io/image/blog-image/2018-04-11_cloudflare_free_ssl/2018-04-11_14-23-30_dns_records_setting.png" alt="" /></p>

<p>操作完成後，出現 <strong>Change your Nameservers</strong> 頁面</p>

<h3 id="更換-nameservers">更換 Nameservers</h3>

<p><a href="https://www.cloudflare.com">CloudFlare</a>提供了2組DNS地址</p>

<ul>
<li>dina.ns.cloudflare.com</li>
<li>roan.ns.cloudflare.com</li>
</ul>

<p><img src="https://raw.githubusercontent.com/MaxdSre/maxdsre.github.io/image/blog-image/2018-04-11_cloudflare_free_ssl/2018-04-11_14-24-23_change_nameserver.png" alt="" /></p>

<p>本人的域名註冊商是<a href="https://www.namecheap.com/">Namecheap</a>，在<code>Domain List</code>中選擇目標域名，在<code>NAMESERVERS</code>中選擇<code>custom dns</code>，將<a href="https://www.cloudflare.com">CloudFlare</a>提供的2組DNS地址添加進去。</p>

<p><img src="https://raw.githubusercontent.com/MaxdSre/maxdsre.github.io/image/blog-image/2018-04-11_cloudflare_free_ssl/2018-04-11_14-26-23_change_nameserver.png" alt="" /></p>

<p>操作完成後，返回<a href="https://www.cloudflare.com">CloudFlare</a>的 <strong>Change your Nameservers</strong> 頁面，點擊<code>Continue</code>按鈕。</p>

<h3 id="更新-nameservers">更新 Nameservers</h3>

<p>頁面顯示如下信息</p>

<blockquote>
<p><strong>Status: Website not active (DNS modification pending)</strong></p>

<p>Please ensure your website is using the nameservers provided:</p>

<ul>
<li>brianna.ns.cloudflare.com</li>
<li>kurt.ns.cloudflare.com</li>
</ul>

<p>Allow up to 24 hours for this change to be processed. There will be no downtime when you switch your name servers. Traffic will gracefully roll from your old name servers to the new name servers without interruption. Your site will remain available throughout the switch</p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/MaxdSre/maxdsre.github.io/image/blog-image/2018-04-11_cloudflare_free_ssl/2018-04-11_14-27-22_panel_overview.png" alt="" /></p>

<p>當在域名提供商處修改好<code>Nameservers</code>後，可點擊右側的<code>Recheck Nameservers</code>檢測是否生效。此處請耐心等待，域名解析需要等一段時間才能生效。</p>

<p>如果檢測通過，則 <strong><code>Status: Pending</code></strong> 會變成 <strong><code>Status: Active</code></strong>，並提示<code>This website is active on CloudFlare.</code>。</p>

<p><img src="https://raw.githubusercontent.com/MaxdSre/maxdsre.github.io/image/blog-image/2018-04-11_cloudflare_free_ssl/2018-04-11_14-28-57_check_status_result.png" alt="" /></p>

<h3 id="crypto-配置">Crypto 配置</h3>

<blockquote>
<p>Manage Cryptography settings for your website.</p>
</blockquote>

<p>返回頁面頂部，有<code>Cryptos</code>圖標點擊進入。</p>

<p><strong><code>SSL</code></strong> 選項有四種選擇<code>Off</code>、<code>Flexible</code>、<code>Full</code>、<code>Strict</code>，點擊下方的<code>Help</code>，可查看相關解釋說明。</p>

<p>查閱的參考教程大都推薦<code>Flexible</code>，而本人則參考<a href="https://zaicheng.me/2016/01/02/hexo-blog-with-custom-domain-and-cloudflare/#Setup_github_pages_CNAME_record">Set up cloudflare</a>，選擇<code>Full</code>。</p>

<p>接下來設置<code>HTTP Strict Transport Security (HSTS)</code>，點擊其右側的<code>Enable HSTS</code>進入，勾選<code>I understand</code>，點擊<code>Nest step</code>，開啓如下兩項</p>

<ul>
<li><code>Apply HSTS policy to subdomains (includeSubDomains)</code></li>
<li><code>No-Sniff Header</code></li>
</ul>

<p>點擊<code>Save</code>保存退出。</p>

<p>其餘的功能，可自行設置。</p>

<h2 id="配置-hugo">配置 Hugo</h2>

<p><a href="https://gohugo.io" title="The world’s fastest framework for building websites">Hugo</a>的設置要比<a href="https://hexo.io" title="A fast, simple &amp; powerful blog framework">Hexo</a>簡單，只需在repo(maxdsre.github.io)的<code>master</code>分支中添加名爲<code>CNAME</code>的文件即可。將自有域名地址寫入該文件，此處寫入<code>axdlog.com</code>。</p>

<p>因爲是通過<a href="https://travis-ci.org" title="Test and Deploy with Confidence">Travis CI</a>進行集成部署，故而只需在<code>.travis.yml</code>文件添加一行設置。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yml" data-lang="yml">script<span class="p">:</span><span class="w">
</span><span class="w">    </span>-<span class="w"> </span>hugo<span class="w">
</span><span class="w">    </span><span class="c"># 添加行</span><span class="w">
</span><span class="w">    </span>-<span class="w"> </span>echo<span class="w"> </span><span class="s1">&#39;axdlog.com&#39;</span><span class="w"> </span><span class="sd">&gt; public/CNAME</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="測試">測試</h2>

<p>在瀏覽器中測試，能正常跳轉到<code>https</code>，並顯示綠色小鎖。在<code>Google Chrome</code>和<code>Mozilla Firefox</code>上測試通過。</p>

<p>當初爲<a href="https://hexo.io" title="A fast, simple &amp; powerful blog framework">Hexo</a>配置SSL證書耗費了5個多小時，而現在整個過程不超過半個小時。</p>

<h2 id="參考資料">參考資料</h2>

<ul>
<li><a href="https://sheharyar.me/blog/free-ssl-for-github-pages-with-custom-domains/">Set Up SSL on Github Pages With Custom Domains for Free</a></li>
<li><a href="https://www.goyllo.com/github/pages/free-cloudflare-ssl-for-custom-domain/">How To Add Free Cloudflare SSL in Github Pages with Custom Domain?</a></li>
<li><a href="https://zaicheng.me/2016/01/02/hexo-blog-with-custom-domain-and-cloudflare/">Hexo blog with custom domain and cloudflare</a></li>
</ul>

<h2 id="更新日誌">更新日誌</h2>

<ul>
<li>2018.04.11 16:05 Wed America/Boston

<ul>
<li>初稿完成</li>
</ul></li>
</ul>
    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">mitui</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">2018-04-11</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/cloudflare/">Cloudflare</a>
          
          <a href="/tags/ssl/">SSL</a>
          
          <a href="/tags/hugo/">Hugo</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/2018/using-cloudflare-free-ssl-in-github-pages-with-custom-domain/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Using Cloudflare Free SSL In GitHub Pages With Custom Domain</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/2018/using-hugo-and-travis-ci-to-deploy-blog-to-github-pages-automatically/">
            <span class="next-text nav-default">Using Hugo and Travis CI To Deploy Blog To Github Pages Automatically</span>
            <span class="prev-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
    

  <div class="disqus-button" id="load_disqus" onclick="load_disqus()">
      Show Disqus Comments
    </div>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
    function load_disqus() {
        
        
        if (window.location.hostname === 'localhost') return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'MetaDefine';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

        $('#load_disqus').remove();
    };
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    

  

  
  </article>
        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:jason.chansz@gmail.com" rel="me noopener" class="iconfont icon-email"
        title="email" target="_blank">
      </a>
  <a href="/index.xml" rel="noopener" type="application/rss+xml" class="iconfont icon-rss"
    title="rss" target="_blank">
  </a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span><span class="author">mitui</span></span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
<script type="text/javascript" src="/dist/jane.min.js?v=2.7.0"></script>





  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  





</body>
</html>
